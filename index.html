<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Document</title>
		<style>
			*{
				margin: 0;
				padding: 0;
				box-sizing: border-box;
				outline: none;
				user-select: none;
			}
			header, main{
				background-color: #ededed;
				padding: .5em;
				margin: .5em;
				border-radius: .5em;
				box-shadow: 3px 3px 5px #a0a0a0;
			}
			header h2{
				font-family: 'Times New Roman', Times, serif;
			}
			header h4{
				font-family: 'Courier New', Courier, monospace;
				padding-left: 1.5em;
				font-weight: 500%;
			}
			main{
				display: flex;
				flex-direction: column;
				margin: 1em .5em;
				align-items: center;
			}
			main input{
				background-color: #aaaaaa;
				border: 0;
				border-radius: .5em;
				width: 100%;
				padding: .1em 1em;
				font-family: 'Courier New', Courier, monospace;
			}
			main button{
				background-color: #aaaaaa;
				border: 0;
				border-radius: .5em;
				width: 100%;
				padding: .1em 1em;
				box-sizing: border-box;
				-webkit-box-sizing: border-box;
				-moz-box-sizing: border-box;
				cursor: pointer;
			}
		</style>
	</head>
	<body>
		<header>
			<h2>Welcome to Never Gonna Lie Random Questions</h2>
			<h4>Developed by MPOP Reverse II</h4>
		</header>
		<main>
			<div class="add-user">
				<table>
					<caption>
						<h3>Registration Panel</h3>
					</caption>
					<tr>
						<td>
							<label for="usn">Username:</label>
						</td>
						<td>
							<input type="text" id="usn">
						</td>
						<td>
							<button id="verify">Verify</button>
						</td>
					</tr>
					<tr>
						<td>
							<label for="verif">Verification:</label>
						</td>
						<td colspan="2">
							<input type="text" id="verif">
						</td>
					</tr>
					<tr>
						<td colspan="3">
							<button id="done">Register</button>
						</td>
					</tr>
				</table>
			</div>
		</main>
	</body>
	<script>
		const $ = (id) => {
			return document.querySelector(id)
		}
		$("#verify").onclick = () => {
			fetch("/verif", {
				"method": "POST",
				"headers": {
					"Content-Type": "application/json",
					"body": $("#usn").value
				}
			}).then(r => {
				return r.json()
			}).then(r => {
				if(r.ok){
					alert(r.msg)
					$("#done").disabled = ""
					$("#verif").disabled = ""
				}else{
					alert(r.msg)
				}
			})
		}
		$("#done").disabled = "disabled"
		$("#verif").disabled = "disabled"
		$("#done").onclick = () => {
			fetch("/done", {
				"method": "POST",
				"headers": {
					"Content-Type": "application/json",
					"body": JSON.stringify({
						"usn": $("#usn").value,
						"code": $("#verif").value
					})
				}
			}).then(r => {
				return r.json()
			}).then(r => {
				alert(r.msg)
			})
		}
	</script>
</html>